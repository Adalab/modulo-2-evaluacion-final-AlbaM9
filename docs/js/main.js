const l=document.querySelector(".masterContainer"),m=document.querySelector(".searchList"),e=document.querySelector(".favsList");let p=document.querySelector(".searchInput");document.querySelector(".resetBtn");const y=document.querySelector(".searchBtn");let t=JSON.parse(localStorage.getItem("favourites")),r,f,h,d=[];t!==null&&(l.classList.add("reverse"),e.classList.remove("hidden"),e.innerHTML=" ",c(t,e,"Animes Favoritos","favsItems"),t.length===0&&(l.classList.remove("reverse"),e.classList.add("hidden")));function S(o){o.preventDefault(),h=p.value.toLowerCase();const n=`https://api.jikan.moe/v4/anime?q=${h}"`;fetch(n).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{r=s.data,console.log(r),m.innerHTML="",c(r,m,"Resultado de búsqueda","selected","hidden"),t!==null?(d=t,l.classList.add("reverse"),e.innerHTML=" ",c(d,e,"Animes Favoritos","favsItems")):(t.length===0||(console.log("no hay favoritos"),e.innerHTML=""),l.classList.remove("reverse")),L()})}y.addEventListener("click",S);function c(o,n,s,v,u){console.log("recarga");let a=`<h2>${s}</h2>`;o.forEach(i=>{f=i.images.jpg.image_url,i.myFavourite==!0||t&&t.some(g=>g.mal_id===i.mal_id)?a+=`<div class = "completeAnime ${v}" > `:a+='<div class = "completeAnime" > ',f!==null?a+=`
           
            <img src="${f}" alt="${i.title}" id = "${i.mal_id}">
            <h3 id = "${i.mal_id}">${i.title}</h3>
            <button  class = "delButn ${u}" >Borrar</button>`:a+=`
            <h3>${i.title}</h3>
            <img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${i.title}">
            <button class = "delButn hidden" >Delete</button>`,a+="</div>"}),n.innerHTML+=a}function F(o){const n=o.target.id;console.log(n);const s=r.findIndex(u=>u.mal_id==n);if(!d.some(u=>u.mal_id==n))r[s].myFavourite=!0,d.push(r[s]);else return;m.innerHTML=" ",e.classList.remove("hidden"),c(r,m,"Resultado de búsqueda","selected","hidden"),L()}m.addEventListener("click",F);function L(){l.classList.add("reverse"),e.classList.remove("hidden"),e.innerHTML=" ",c(d,e,"Animes favoritos","favsItems"),localStorage.setItem("favourites",JSON.stringify(d))}function A(o){const n=o.target.id;console.log(n);const s=t.findIndex(v=>v.mal_id==n);console.log(s),t.splice(t[s],1),localStorage.setItem("favourites",JSON.stringify(t)),e.innerHTML="",c(t,e,"Animes favoritos","favsItems"),t.length<=0&&e.classList.add("hidden")}e.addEventListener("click",A);
//# sourceMappingURL=main.js.map
