const c=document.querySelector(".masterContainer"),m=document.querySelector(".searchList"),e=document.querySelector(".favsList");let L=document.querySelector(".searchInput");const p=document.querySelector(".resetBtn"),y=document.querySelector(".searchBtn");let n=JSON.parse(localStorage.getItem("favourites")),d,f,h,t=[];n!==null&&(n.length===0?(c.classList.remove("reverse"),e.classList.add("hidden")):(t=n,c.classList.add("reverse"),e.classList.remove("hidden"),e.innerHTML=" ",v(n,e,"Animes Favoritos","favsItems")));function $(r){r.preventDefault(),h=L.value.toLowerCase();const a=`https://api.jikan.moe/v4/anime?q=${h}"`;fetch(a).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{d=s.data,m.innerHTML="",v(d,m,"Resultado de búsqueda","selected","hidden"),n!==null&&(t=n,c.classList.add("reverse"),e.innerHTML=" ",v(n,e,"Animes Favoritos","favsItems"),n.length===0&&(e.innerHTML="",c.classList.remove("reverse"))),g()})}y.addEventListener("click",$);function v(r,a,s,u,l){let o=`<h2>${s}</h2>`;r.forEach(i=>{f=i.images.jpg.image_url,i.myFavourite==!0||n&&n.some(S=>S.mal_id===i.mal_id)?o+=`<div class = "completeAnime ${u}" > `:o+='<div class = "completeAnime" > ',f!==null?o+=`
           
            <img src="${f}" alt="${i.title}" id = "${i.mal_id}">
            <h3 id = "${i.mal_id}">${i.title}</h3>
            <div id = "${i.mal_id}"  class = "delButn ${l}" >X</div>`:o+=`
            <h3>${i.title}</h3>
            <img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${i.title}">
            <div id = "${i.mal_id}"  class = "delButn ${l}" >X</div>`,o+="</div>"}),a.innerHTML+=o}function F(r){const a=r.target.id;console.log(a);const s=d.findIndex(l=>l.mal_id==a);t.some(l=>l.mal_id==a)||(d[s].myFavourite=!0,t.push(d[s])),m.innerHTML=" ",v(d,m,"Resultado de búsqueda","selected","hidden"),g()}m.addEventListener("click",F);function g(){t.length<=0?(e.classList.add("hidden"),c.classList.remove("reverse")):(c.classList.add("reverse"),e.classList.remove("hidden"),e.innerHTML=" ",v(t,e,"Animes favoritos","favsItems")),localStorage.setItem("favourites",JSON.stringify(t))}function T(r){const a=r.target.id,s=t.findIndex(u=>u.mal_id==a);s===-1?console.log("El anime favorito no se encontró en favArray"):(t.splice(s,1),e.innerHTML="",v(t,e,"Animes favoritos","favsItems"),(t.length===0||n.length===0)&&e.classList.add("hidden")),localStorage.setItem("favourites",JSON.stringify(t))}e.addEventListener("click",T);p.addEventListener("click",()=>{e.innerHTML="",m.innerHTML="",t.length=0,localStorage.setItem("favourites",JSON.stringify(t)),L.value=""});
//# sourceMappingURL=main.js.map
