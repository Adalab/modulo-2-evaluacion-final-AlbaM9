const l=document.querySelector(".masterContainer"),m=document.querySelector(".searchList"),t=document.querySelector(".favsList");let p=document.querySelector(".searchInput");document.querySelector(".resetBtn");const y=document.querySelector(".searchBtn");let e=JSON.parse(localStorage.getItem("favourites")),r,f,h,c=[];e!==null&&(l.classList.add("reverse"),t.classList.remove("hidden"),t.innerHTML=" ",d(e,t,"Animes Favoritos","favsItems"),e.length===0&&l.classList.remove("reverse"));function S(o){o.preventDefault(),h=p.value.toLowerCase();const n=`https://api.jikan.moe/v4/anime?q=${h}"`;fetch(n).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{r=s.data,console.log(r),m.innerHTML="",d(r,m,"Resultado de búsqueda","selected","hidden"),e!==null?(c=e,l.classList.add("reverse"),t.innerHTML=" ",d(c,t,"Animes Favoritos","favsItems")):(e.length===0||(console.log("no hay favoritos"),t.innerHTML=""),l.classList.remove("reverse")),L()})}y.addEventListener("click",S);function d(o,n,s,v,u){console.log("recarga");let a=`<h2>${s}</h2>`;o.forEach(i=>{f=i.images.jpg.image_url,i.myFavourite==!0||e&&e.some(g=>g.mal_id===i.mal_id)?a+=`<div class = "completeAnime ${v}" > `:a+='<div class = "completeAnime" > ',f!==null?a+=`
           
            <img src="${f}" alt="${i.title}" id = "${i.mal_id}">
            <h3 id = "${i.mal_id}">${i.title}</h3>
            <button  class = "delButn ${u}" >Borrar</button>`:a+=`
            <h3>${i.title}</h3>
            <img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${i.title}">
            <button class = "delButn hidden" >Delete</button>`,a+="</div>"}),n.innerHTML+=a}function F(o){const n=o.target.id;console.log(n);const s=r.findIndex(u=>u.mal_id==n);if(!c.some(u=>u.mal_id==n))r[s].myFavourite=!0,c.push(r[s]);else return;m.innerHTML=" ",t.classList.remove("hidden"),d(r,m,"Resultado de búsqueda","selected","hidden"),L()}m.addEventListener("click",F);function L(){l.classList.add("reverse"),t.classList.remove("hidden"),t.innerHTML=" ",d(c,t,"Animes favoritos","favsItems"),localStorage.setItem("favourites",JSON.stringify(c))}function A(o){const n=o.target.id;console.log(n);const s=e.findIndex(v=>v.mal_id==n);console.log(s),e.splice(e[s],1),localStorage.setItem("favourites",JSON.stringify(e)),t.innerHTML="",d(e,t,"Animes favoritos","favsItems")}t.addEventListener("click",A);
//# sourceMappingURL=main.js.map
