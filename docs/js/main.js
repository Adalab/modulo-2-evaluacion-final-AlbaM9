const d=document.querySelector(".masterContainer"),c=document.querySelector(".searchList"),e=document.querySelector(".favsList");let L=document.querySelector(".searchInput");const p=document.querySelector(".resetBtn"),y=document.querySelector(".searchBtn");let i=JSON.parse(localStorage.getItem("favourites")),o,f,h,t=[];i!==null&&(i.length===0?(d.classList.remove("reverse"),e.classList.add("hidden")):(t=i,d.classList.add("reverse"),e.classList.remove("hidden"),e.innerHTML=" ",m(i,e,"Animes Favoritos","favsItems")));function F(a){a.preventDefault(),h=L.value.toLowerCase();const r=`https://api.jikan.moe/v4/anime?q=${h}"`;fetch(r).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{o=s.data,c.innerHTML="",m(o,c,"Resultado de búsqueda","selected","hidden"),i!==null&&(t=i,d.classList.add("reverse"),e.innerHTML=" ",m(i,e,"Animes Favoritos","favsItems"),i.length===0&&(e.innerHTML="",d.classList.remove("reverse"))),g()})}y.addEventListener("click",F);function m(a,r,s,u,v){let l=`<h2>${s}</h2>`;a.forEach(n=>{f=n.images.jpg.image_url,n.myFavourite==!0||i&&i.some(S=>S.mal_id===n.mal_id)?l+=`<div class = "completeAnime ${u}" > `:l+='<div class = "completeAnime" > ',f!==null?l+=`
           
            <img src="${f}" alt="${n.title}" id = "${n.mal_id}">
            <h3 id = "${n.mal_id}">${n.title}</h3>
            <div id = "${n.mal_id}"  class = "delButn ${v}" >X</div>`:l+=`
            <h3>${n.title}</h3>
            <img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${n.title}">
            `,l+="</div>"}),r.innerHTML+=l}function T(a){const r=a.target.id;console.log(r);const s=o.findIndex(v=>v.mal_id==r);t.some(v=>v.mal_id==r)||(o[s].myFavourite=!0,t.push(o[s])),c.innerHTML=" ",m(o,c,"Resultado de búsqueda","selected","hidden"),g()}c.addEventListener("click",T);function g(){t.length<=0?(e.classList.add("hidden"),d.classList.remove("reverse")):(d.classList.add("reverse"),e.classList.remove("hidden"),e.innerHTML=" ",m(t,e,"Animes favoritos","favsItems")),localStorage.setItem("favourites",JSON.stringify(t))}function A(a){const r=a.target.id,s=t.findIndex(u=>u.mal_id==r);s===-1?console.log("El anime favorito no se encontró en favArray"):(t.splice(s,1),e.innerHTML="",m(t,e,"Animes favoritos","favsItems"),(t.length===0||i.length===0)&&e.classList.add("hidden")),localStorage.setItem("favourites",JSON.stringify(t))}e.addEventListener("click",A);p.addEventListener("click",()=>{e.innerHTML="",c.innerHTML="",t.length=0,localStorage.setItem("favourites",JSON.stringify(t)),L.value=""});
//# sourceMappingURL=main.js.map
