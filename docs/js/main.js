const d=document.querySelector(".masterContainer"),u=document.querySelector(".searchList"),e=document.querySelector(".favsList");let p=document.querySelector(".searchInput");document.querySelector(".resetBtn");const y=document.querySelector(".searchBtn");let i=JSON.parse(localStorage.getItem("favourites")),l,f,h,s=[];i!==null&&(i.length===0?(d.classList.remove("reverse"),e.classList.add("hidden")):(s=i,d.classList.add("reverse"),e.classList.remove("hidden"),e.innerHTML=" ",c(i,e,"Animes Favoritos","favsItems")));function S(r){r.preventDefault(),h=p.value.toLowerCase();const a=`https://api.jikan.moe/v4/anime?q=${h}"`;fetch(a).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{l=t.data,u.innerHTML="",c(l,u,"Resultado de búsqueda","selected","hidden"),i!==null&&(s=i,d.classList.add("reverse"),e.innerHTML=" ",c(i,e,"Animes Favoritos","favsItems"),i.length===0&&(e.innerHTML="",d.classList.remove("reverse"))),L()})}y.addEventListener("click",S);function c(r,a,t,v,m){let o=`<h2>${t}</h2>`;r.forEach(n=>{f=n.images.jpg.image_url,n.myFavourite==!0||i&&i.some(g=>g.mal_id===n.mal_id)?o+=`<div class = "completeAnime ${v}" > `:o+='<div class = "completeAnime" > ',f!==null?o+=`
           
            <img src="${f}" alt="${n.title}" id = "${n.mal_id}">
            <h3 id = "${n.mal_id}">${n.title}</h3>
            <div id = "${n.mal_id}"  class = "delButn ${m}" >X</div>`:o+=`
            <h3>${n.title}</h3>
            <img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${n.title}">
            `,o+="</div>"}),a.innerHTML+=o}function F(r){const a=r.target.id;console.log(a);const t=l.findIndex(m=>m.mal_id==a);s.some(m=>m.mal_id==a)||(l[t].myFavourite=!0,s.push(l[t])),u.innerHTML=" ",c(l,u,"Resultado de búsqueda","selected","hidden"),L()}u.addEventListener("click",F);function L(){s.length===0?(e.classList.add("hidden"),d.classList.remove("reverse")):(d.classList.add("reverse"),e.classList.remove("hidden"),e.innerHTML=" ",c(s,e,"Animes favoritos","favsItems"),localStorage.setItem("favourites",JSON.stringify(s)))}function A(r){const a=r.target.id,t=s.findIndex(v=>v.mal_id==a);t===-1?console.log("El anime favorito no se encontró en favArray"):(s.splice(t,1),e.innerHTML="",c(s,e,"Animes favoritos","favsItems"),(s.length===0||i.length===0)&&e.classList.add("hidden")),localStorage.setItem("favourites",JSON.stringify(s))}e.addEventListener("click",A);
//# sourceMappingURL=main.js.map
